<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base64 Encoder/Decoder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #f59e0b;
            --secondary: #d97706;
            --accent: #fbbf24;
            --light: #f8fafc;
            --dark: #1e293b;
            --gray: #64748b;
            --success: #10b981;
            --error: #ef4444;
        }

        body {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            padding: 30px;
            margin-top: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: white;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        .input-section {
            margin-bottom: 25px;
        }

        h2 {
            color: var(--secondary);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #f0f0f0;
        }

        textarea {
            width: 100%;
            height: 150px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            resize: vertical;
            transition: border-color 0.3s;
            line-height: 1.6;
            font-family: 'Courier New', monospace;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
        }

        .file-upload {
            margin: 15px 0;
            padding: 20px;
            border: 2px dashed #e0e0e0;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .file-upload:hover {
            border-color: var(--primary);
            background-color: #fffbeb;
        }

        .file-upload.dragover {
            border-color: var(--primary);
            background-color: #fef3c7;
        }

        .file-info {
            margin-top: 10px;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .control-group {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
        }

        select, button, input[type="file"] {
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 16px;
        }

        select:focus {
            outline: none;
            border-color: var(--primary);
        }

        button {
            background-color: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        button:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
        }

        button.secondary {
            background-color: var(--light);
            color: var(--dark);
            border: 1px solid #ddd;
        }

        button.secondary:hover {
            background-color: #e2e8f0;
        }

        button.success {
            background-color: var(--success);
            color: white;
        }

        button.success:hover {
            background-color: #059669;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .output-section {
            margin-top: 30px;
        }

        .output-container {
            position: relative;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--primary);
            padding: 8px 12px;
            font-size: 14px;
        }

        .copy-btn:hover {
            background-color: var(--secondary);
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            color: var(--gray);
            font-size: 14px;
        }

        .preview {
            margin-top: 10px;
            padding: 15px;
            background-color: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            word-break: break-all;
            max-height: 200px;
            overflow-y: auto;
        }

        .image-preview {
            max-width: 100%;
            max-height: 200px;
            margin-top: 10px;
            border-radius: 8px;
            display: none;
        }

        .examples {
            margin-top: 30px;
        }

        .example-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .example-item {
            padding: 15px;
            background-color: #f1f5f9;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #e2e8f0;
        }

        .example-item:hover {
            background-color: #e2e8f0;
            transform: translateY(-2px);
        }

        .example-text {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .example-base64 {
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            color: var(--gray);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        footer {
            margin-top: 40px;
            text-align: center;
            color: white;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .info-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #fffbeb;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }

        .info-section h3 {
            color: var(--secondary);
            margin-bottom: 10px;
        }

        .info-section ul {
            padding-left: 20px;
        }

        .info-section li {
            margin-bottom: 8px;
        }

        .alert {
            padding: 12px 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: 500;
        }

        .alert-error {
            background-color: #fef2f2;
            color: var(--error);
            border-left: 4px solid var(--error);
        }

        .alert-success {
            background-color: #f0fdf4;
            color: var(--success);
            border-left: 4px solid var(--success);
        }

        @media (max-width: 768px) {
            .controls {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .example-list {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <h1>Base64 Encoder/Decoder</h1>
    <p class="subtitle">Encode and decode text, files, and images to/from Base64</p>
    
    <div class="container">
        <div class="input-section">
            <h2>Input</h2>
            <textarea id="inputText" placeholder="Enter text to encode or Base64 to decode...">Hello, World! This is a sample text for Base64 encoding.</textarea>
            
            <div class="file-upload" id="fileUpload">
                <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;"></i>
                <p>Drag & drop a file here or <span style="color: var(--primary); font-weight: 600;">click to browse</span></p>
                <p class="file-info">Supports images, documents, and other files (max 10MB)</p>
                <input type="file" id="fileInput" style="display: none;">
            </div>
            
            <div id="fileDetails" class="file-info" style="display: none;"></div>
            
            <div class="controls">
                <div class="control-group">
                    <label for="operation">Operation:</label>
                    <select id="operation">
                        <option value="encode">Encode to Base64</option>
                        <option value="decode">Decode from Base64</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="format">Output Format:</label>
                    <select id="format">
                        <option value="standard">Standard</option>
                        <option value="url-safe">URL Safe</option>
                        <option value="mime">MIME (with line breaks)</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label>Actions:</label>
                    <div class="button-group">
                        <button id="convertBtn">
                            <i class="fas fa-sync-alt"></i> Convert
                        </button>
                        <button id="swapBtn" class="secondary">
                            <i class="fas fa-exchange-alt"></i> Swap Input/Output
                        </button>
                        <button id="clearBtn" class="secondary">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                        <button id="downloadBtn" class="success" style="display: none;">
                            <i class="fas fa-download"></i> Download File
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="output-section">
            <h2>Output</h2>
            <div class="output-container">
                <textarea id="outputText" readonly placeholder="Converted Base64 or text will appear here..."></textarea>
                <button id="copyBtn" class="copy-btn">
                    <i class="fas fa-copy"></i> Copy
                </button>
            </div>
            
            <div class="stats">
                <div class="stat-item">
                    <i class="fas fa-ruler-combined"></i>
                    <span id="inputLength">Input: 0 characters</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-ruler"></i>
                    <span id="outputLength">Output: 0 characters</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-percentage"></i>
                    <span id="changePercent">Change: 0%</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-expand-arrows-alt"></i>
                    <span id="sizeRatio">Size Ratio: 1:1</span>
                </div>
            </div>
            
            <div class="preview">
                <strong>Preview:</strong>
                <div id="previewArea"></div>
                <img id="imagePreview" class="image-preview" alt="Image preview">
            </div>
        </div>
        
        <div class="examples">
            <h2>Common Examples</h2>
            <div class="example-list" id="exampleList">
                <!-- Examples will be populated by JavaScript -->
            </div>
        </div>
        
        <div class="info-section">
            <h3>About Base64 Encoding</h3>
            <p>Base64 is a binary-to-text encoding scheme that represents binary data in an ASCII string format. It's commonly used to encode data that needs to be stored and transferred over media designed to deal with text.</p>
            
            <h3>Common Use Cases:</h3>
            <ul>
                <li>Embedding images in HTML/CSS (data URLs)</li>
                <li>Encoding email attachments</li>
                <li>Storing binary data in JSON or XML</li>
                <li>Encoding credentials for HTTP Basic Authentication</li>
            </ul>
            
            <h3>Format Options:</h3>
            <ul>
                <li><strong>Standard:</strong> Regular Base64 encoding with + and / characters</li>
                <li><strong>URL Safe:</strong> Replaces + with - and / with _ for URL compatibility</li>
                <li><strong>MIME:</strong> Adds line breaks every 76 characters for email compatibility</li>
            </ul>
        </div>
    </div>
    
    <footer>
        <p>Base64 Encoder/Decoder &copy; 2023 | Convert text and files to Base64 format</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const inputText = document.getElementById('inputText');
            const outputText = document.getElementById('outputText');
            const operation = document.getElementById('operation');
            const format = document.getElementById('format');
            const convertBtn = document.getElementById('convertBtn');
            const swapBtn = document.getElementById('swapBtn');
            const clearBtn = document.getElementById('clearBtn');
            const copyBtn = document.getElementById('copyBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const fileInput = document.getElementById('fileInput');
            const fileUpload = document.getElementById('fileUpload');
            const fileDetails = document.getElementById('fileDetails');
            const inputLength = document.getElementById('inputLength');
            const outputLength = document.getElementById('outputLength');
            const changePercent = document.getElementById('changePercent');
            const sizeRatio = document.getElementById('sizeRatio');
            const previewArea = document.getElementById('previewArea');
            const imagePreview = document.getElementById('imagePreview');
            const exampleList = document.getElementById('exampleList');
            
            let currentFile = null;
            let fileName = '';
            
            // Common examples for quick testing
            const examples = [
                {
                    text: "Hello, World!",
                    base64: "SGVsbG8sIFdvcmxkIQ=="
                },
                {
                    text: "Base64 encoding",
                    base64: "QmFzZTY0IGVuY29kaW5n"
                },
                {
                    text: "1234567890",
                    base64: "MTIzNDU2Nzg5MA=="
                },
                {
                    text: "Test with symbols: !@#$%^&*()",
                    base64: "VGVzdCB3aXRoIHN5bWJvbHM6ICFAIyQlXiYqKCk="
                },
                {
                    text: "Lorem ipsum dolor sit amet",
                    base64: "TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQ="
                }
            ];
            
            // Populate examples
            function populateExamples() {
                exampleList.innerHTML = '';
                examples.forEach(example => {
                    const exampleItem = document.createElement('div');
                    exampleItem.className = 'example-item';
                    exampleItem.innerHTML = `
                        <div class="example-text">${example.text}</div>
                        <div class="example-base64">${example.base64}</div>
                    `;
                    exampleItem.addEventListener('click', function() {
                        inputText.value = operation.value === 'encode' ? example.text : example.base64;
                        currentFile = null;
                        fileDetails.style.display = 'none';
                        downloadBtn.style.display = 'none';
                        convertText();
                    });
                    exampleList.appendChild(exampleItem);
                });
            }
            
            // Initial conversion
            convertText();
            populateExamples();
            
            // Event listeners
            convertBtn.addEventListener('click', convertText);
            swapBtn.addEventListener('click', swapText);
            clearBtn.addEventListener('click', clearText);
            copyBtn.addEventListener('click', copyToClipboard);
            downloadBtn.addEventListener('click', downloadFile);
            inputText.addEventListener('input', updateStats);
            operation.addEventListener('change', updateUI);
            fileInput.addEventListener('change', handleFileSelect);
            
            // File upload handlers
            fileUpload.addEventListener('click', () => fileInput.click());
            fileUpload.addEventListener('dragover', (e) => {
                e.preventDefault();
                fileUpload.classList.add('dragover');
            });
            fileUpload.addEventListener('dragleave', () => {
                fileUpload.classList.remove('dragover');
            });
            fileUpload.addEventListener('drop', (e) => {
                e.preventDefault();
                fileUpload.classList.remove('dragover');
                if (e.dataTransfer.files.length) {
                    fileInput.files = e.dataTransfer.files;
                    handleFileSelect();
                }
            });
            
            // Handle file selection
            function handleFileSelect() {
                if (fileInput.files.length === 0) return;
                
                const file = fileInput.files[0];
                
                // Check file size (10MB limit)
                if (file.size > 10 * 1024 * 1024) {
                    showAlert('File size exceeds 10MB limit', 'error');
                    return;
                }
                
                currentFile = file;
                fileName = file.name;
                
                // Update file details
                fileDetails.innerHTML = `
                    <strong>Selected file:</strong> ${file.name} (${formatFileSize(file.size)})
                `;
                fileDetails.style.display = 'block';
                
                // Read file as Base64
                const reader = new FileReader();
                reader.onload = function(e) {
                    inputText.value = e.target.result.split(',')[1]; // Remove data URL prefix
                    operation.value = 'encode';
                    updateUI();
                    convertText();
                };
                reader.readAsDataURL(file);
            }
            
            // Convert text based on selected operation
            function convertText() {
                const text = inputText.value;
                const op = operation.value;
                const fmt = format.value;
                
                let result = '';
                let error = null;
                
                try {
                    if (op === 'encode') {
                        result = btoa(unescape(encodeURIComponent(text)));
                        
                        // Apply formatting
                        if (fmt === 'url-safe') {
                            result = result.replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');
                        } else if (fmt === 'mime') {
                            result = result.replace(/(.{76})/g, "$1\n");
                        }
                    } else {
                        // Handle URL-safe Base64
                        let base64 = text;
                        if (fmt === 'url-safe') {
                            base64 = base64.replace(/-/g, '+').replace(/_/g, '/');
                            // Add padding if needed
                            while (base64.length % 4) {
                                base64 += '=';
                            }
                        }
                        
                        try {
                            result = decodeURIComponent(escape(atob(base64)));
                        } catch (e) {
                            // If text decoding fails, try to handle as binary data
                            const binary = atob(base64);
                            const bytes = new Uint8Array(binary.length);
                            for (let i = 0; i < binary.length; i++) {
                                bytes[i] = binary.charCodeAt(i);
                            }
                            
                            // Check if it's an image
                            const blob = new Blob([bytes]);
                            if (blob.type.startsWith('image/')) {
                                const url = URL.createObjectURL(blob);
                                imagePreview.src = url;
                                imagePreview.style.display = 'block';
                                previewArea.textContent = `Image: ${blob.type}, ${formatFileSize(blob.size)}`;
                                downloadBtn.style.display = 'flex';
                                downloadBtn.setAttribute('data-blob', url);
                                downloadBtn.setAttribute('data-filename', 'decoded_image.png');
                            } else {
                                // For other binary data, show info
                                previewArea.textContent = `Binary data: ${blob.type}, ${formatFileSize(blob.size)}`;
                                downloadBtn.style.display = 'flex';
                                downloadBtn.setAttribute('data-blob', url);
                                downloadBtn.setAttribute('data-filename', 'decoded_file.bin');
                            }
                            result = base64; // Keep Base64 in output for reference
                        }
                    }
                } catch (e) {
                    error = e.message;
                    result = `Error: ${e.message}`;
                }
                
                outputText.value = result;
                updateStats();
                
                if (op === 'decode' && !error) {
                    updatePreview(result);
                } else if (op === 'encode') {
                    previewArea.textContent = result;
                    imagePreview.style.display = 'none';
                }
                
                if (error) {
                    showAlert(error, 'error');
                } else {
                    clearAlert();
                }
            }
            
            // Update UI based on operation
            function updateUI() {
                if (operation.value === 'encode') {
                    format.disabled = false;
                } else {
                    format.disabled = false;
                }
                
                // Hide download button unless we have a file to download
                if (operation.value === 'encode' || !currentFile) {
                    downloadBtn.style.display = 'none';
                }
            }
            
            // Update statistics
            function updateStats() {
                const inputLen = inputText.value.length;
                const outputLen = outputText.value.length;
                
                inputLength.textContent = `Input: ${inputLen} characters`;
                outputLength.textContent = `Output: ${outputLen} characters`;
                
                if (inputLen > 0) {
                    const change = ((outputLen - inputLen) / inputLen * 100).toFixed(1);
                    changePercent.textContent = `Change: ${change}%`;
                    
                    const ratio = (outputLen / inputLen).toFixed(2);
                    sizeRatio.textContent = `Size Ratio: ${ratio}:1`;
                } else {
                    changePercent.textContent = 'Change: 0%';
                    sizeRatio.textContent = 'Size Ratio: 1:1';
                }
            }
            
            // Update preview
            function updatePreview(text) {
                // Check if text is likely binary data or contains non-printable characters
                if (/[\x00-\x08\x0E-\x1F]/.test(text)) {
                    previewArea.textContent = 'Binary data detected - use download button to save file';
                    imagePreview.style.display = 'none';
                } else {
                    previewArea.textContent = text;
                    imagePreview.style.display = 'none';
                }
            }
            
            // Swap input and output
            function swapText() {
                const temp = inputText.value;
                inputText.value = outputText.value;
                outputText.value = temp;
                
                // Toggle operation
                operation.value = operation.value === 'encode' ? 'decode' : 'encode';
                
                convertText();
            }
            
            // Clear text
            function clearText() {
                inputText.value = '';
                outputText.value = '';
                fileInput.value = '';
                fileDetails.style.display = 'none';
                currentFile = null;
                downloadBtn.style.display = 'none';
                imagePreview.style.display = 'none';
                updateStats();
                previewArea.textContent = '';
                clearAlert();
            }
            
            // Copy to clipboard
            function copyToClipboard() {
                outputText.select();
                outputText.setSelectionRange(0, 99999); // For mobile devices
                
                try {
                    document.execCommand('copy');
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copy';
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
            }
            
            // Download file
            function downloadFile() {
                const blobUrl = downloadBtn.getAttribute('data-blob');
                const filename = downloadBtn.getAttribute('data-filename');
                
                if (blobUrl) {
                    const a = document.createElement('a');
                    a.href = blobUrl;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                }
            }
            
            // Utility functions
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            function showAlert(message, type) {
                clearAlert();
                const alert = document.createElement('div');
                alert.className = `alert alert-${type}`;
                alert.innerHTML = `<i class="fas fa-${type === 'error' ? 'exclamation-triangle' : 'check-circle'}"></i> ${message}`;
                inputSection.appendChild(alert);
            }
            
            function clearAlert() {
                const alerts = document.querySelectorAll('.alert');
                alerts.forEach(alert => alert.remove());
            }
        });
    </script>
</body>
</html>
