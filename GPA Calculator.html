<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPA Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            color: white;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .calculator-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .calculator-tabs {
            display: flex;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 25px;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .tab:hover {
            color: #667eea;
        }
        
        .grading-system {
            margin-bottom: 25px;
        }
        
        .system-options {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .system-option {
            padding: 10px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .system-option.active {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .system-option:hover {
            border-color: #667eea;
        }
        
        .courses-section {
            margin-bottom: 25px;
        }
        
        .courses-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .courses-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .add-course-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }
        
        .add-course-btn:hover {
            background: #5a6fd8;
        }
        
        .courses-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 15px;
        }
        
        .courses-table th {
            background: #667eea;
            color: white;
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .courses-table td {
            padding: 10px 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .courses-table tr:nth-child(even) {
            background: #f8fafc;
        }
        
        .courses-table tr:hover {
            background: #f0f4ff;
        }
        
        .course-input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            font-size: 0.95rem;
        }
        
        .course-input:focus {
            border-color: #667eea;
            outline: none;
        }
        
        .remove-course {
            color: #ef4444;
            cursor: pointer;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .remove-course:hover {
            color: #dc2626;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #764ba2;
        }
        
        .btn-secondary:hover {
            background: #6a4190;
            box-shadow: 0 5px 15px rgba(118, 75, 162, 0.4);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid #667eea;
            color: #667eea;
        }
        
        .btn-outline:hover {
            background: #667eea;
            color: white;
        }
        
        .results-section {
            background: #f0f9ff;
            border-radius: 10px;
            padding: 30px;
            margin-top: 25px;
            border: 1px solid #bae6fd;
        }
        
        .results-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .results-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #0369a1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .gpa-display {
            text-align: center;
            padding: 25px;
            background: white;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .gpa-value {
            font-size: 3.5rem;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .gpa-label {
            font-size: 1.2rem;
            color: #666;
        }
        
        .gpa-scale {
            font-size: 0.9rem;
            color: #888;
            margin-top: 5px;
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .summary-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }
        
        .summary-value {
            font-size: 1.8rem;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .summary-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 600;
        }
        
        .grade-breakdown {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }
        
        .breakdown-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .breakdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .breakdown-item {
            text-align: center;
            padding: 15px;
            background: #f8fafc;
            border-radius: 6px;
        }
        
        .breakdown-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .breakdown-label {
            font-size: 0.85rem;
            color: #666;
        }
        
        .course-list {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }
        
        .course-list-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .course-list-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .course-list-table th {
            background: #f1f5f9;
            padding: 10px 15px;
            text-align: left;
            font-weight: 600;
            color: #475569;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .course-list-table td {
            padding: 10px 15px;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .course-list-table tr:last-child td {
            border-bottom: none;
        }
        
        .features {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 40px;
        }
        
        .feature-card {
            flex: 1;
            min-width: 250px;
            background: white;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .feature-icon {
            font-size: 40px;
            color: #667eea;
            margin-bottom: 15px;
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 30px 0;
            margin-top: 40px;
            opacity: 0.8;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .calculator-tabs {
                flex-direction: column;
            }
            
            .tab {
                text-align: center;
                border-bottom: none;
                border-left: 3px solid transparent;
            }
            
            .tab.active {
                border-left-color: #667eea;
                border-bottom-color: transparent;
            }
            
            .system-options {
                flex-direction: column;
            }
            
            .courses-table {
                display: block;
                overflow-x: auto;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .summary-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .breakdown-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .summary-cards {
                grid-template-columns: 1fr;
            }
            
            .breakdown-grid {
                grid-template-columns: 1fr;
            }
            
            .gpa-value {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>GPA Calculator</h1>
            <p class="subtitle">Calculate your Grade Point Average with multiple grading systems and course weights</p>
        </header>
        
        <div class="calculator-card">
            <div class="calculator-tabs">
                <div class="tab active" data-tab="current">Current Semester</div>
                <div class="tab" data-tab="cumulative">Cumulative GPA</div>
                <div class="tab" data-tab="target">Target GPA</div>
            </div>
            
            <div class="grading-system">
                <h3>Grading System</h3>
                <div class="system-options">
                    <div class="system-option active" data-system="4.0">4.0 Scale (A-F)</div>
                    <div class="system-option" data-system="100">Percentage Scale</div>
                    <div class="system-option" data-system="uk">UK System (1st, 2:1, etc.)</div>
                    <div class="system-option" data-system="custom">Custom Scale</div>
                </div>
            </div>
            
            <div class="courses-section">
                <div class="courses-header">
                    <h3 class="courses-title">
                        <i class="fas fa-book"></i> Courses
                    </h3>
                    <button class="add-course-btn" id="addCourseBtn">
                        <i class="fas fa-plus"></i> Add Course
                    </button>
                </div>
                
                <table class="courses-table">
                    <thead>
                        <tr>
                            <th>Course Name</th>
                            <th>Credits</th>
                            <th>Grade</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="coursesTableBody">
                        <!-- Course rows will be added here -->
                    </tbody>
                </table>
            </div>
            
            <div class="action-buttons">
                <button class="btn" id="calculateBtn">
                    <i class="fas fa-calculator"></i> Calculate GPA
                </button>
                <button class="btn btn-secondary" id="saveBtn">
                    <i class="fas fa-save"></i> Save Semester
                </button>
                <button class="btn btn-outline" id="resetBtn">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>
            
            <div class="results-section hidden" id="resultsSection">
                <div class="results-header">
                    <h3 class="results-title">
                        <i class="fas fa-chart-bar"></i> GPA Calculation Results
                    </h3>
                    <div class="gpa-scale-badge" id="gpaScaleBadge">
                        <span style="background: #667eea; color: white; padding: 5px 10px; border-radius: 20px; font-size: 0.9rem;">
                            <i class="fas fa-balance-scale"></i> 4.0 Scale
                        </span>
                    </div>
                </div>
                
                <div class="gpa-display">
                    <div class="gpa-value" id="gpaValue">0.00</div>
                    <div class="gpa-label">Grade Point Average</div>
                    <div class="gpa-scale" id="gpaScale">On a 4.0 scale</div>
                </div>
                
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="summary-value" id="totalCredits">0</div>
                        <div class="summary-label">Total Credits</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="qualityPoints">0.00</div>
                        <div class="summary-label">Quality Points</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="coursesCount">0</div>
                        <div class="summary-label">Courses</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="gpaStatus">-</div>
                        <div class="summary-label">Status</div>
                    </div>
                </div>
                
                <div class="grade-breakdown">
                    <h4 class="breakdown-title">
                        <i class="fas fa-chart-pie"></i> Grade Distribution
                    </h4>
                    <div class="breakdown-grid" id="gradeBreakdown">
                        <!-- Grade breakdown will be inserted here -->
                    </div>
                </div>
                
                <div class="course-list">
                    <h4 class="course-list-title">
                        <i class="fas fa-list"></i> Course Summary
                    </h4>
                    <table class="course-list-table">
                        <thead>
                            <tr>
                                <th>Course</th>
                                <th>Credits</th>
                                <th>Grade</th>
                                <th>Points</th>
                            </tr>
                        </thead>
                        <tbody id="courseSummaryBody">
                            <!-- Course summary will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="features">
            <div class="feature-card">
                <i class="fas fa-balance-scale feature-icon"></i>
                <h3>Multiple Grading Systems</h3>
                <p>Calculate GPA using 4.0 scale, percentage system, UK classification, or custom scales</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-weight-hanging feature-icon"></i>
                <h3>Credit Weighting</h3>
                <p>Account for different credit values when calculating your weighted GPA</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-chart-pie feature-icon"></i>
                <h3>Visual Analytics</h3>
                <p>See your grade distribution and understand your academic performance</p>
            </div>
        </div>
        
        <footer>
            <p>GPA Calculator &copy; 2023 | All rights reserved</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const tabs = document.querySelectorAll('.tab');
            const systemOptions = document.querySelectorAll('.system-option');
            const addCourseBtn = document.getElementById('addCourseBtn');
            const coursesTableBody = document.getElementById('coursesTableBody');
            const calculateBtn = document.getElementById('calculateBtn');
            const saveBtn = document.getElementById('saveBtn');
            const resetBtn = document.getElementById('resetBtn');
            const resultsSection = document.getElementById('resultsSection');
            const gpaScaleBadge = document.getElementById('gpaScaleBadge');
            const gpaValue = document.getElementById('gpaValue');
            const gpaScale = document.getElementById('gpaScale');
            const totalCredits = document.getElementById('totalCredits');
            const qualityPoints = document.getElementById('qualityPoints');
            const coursesCount = document.getElementById('coursesCount');
            const gpaStatus = document.getElementById('gpaStatus');
            const gradeBreakdown = document.getElementById('gradeBreakdown');
            const courseSummaryBody = document.getElementById('courseSummaryBody');
            
            // Variables
            let currentTab = 'current';
            let currentSystem = '4.0';
            let courses = [];
            let savedSemesters = [];
            
            // Grading scales
            const gradingScales = {
                '4.0': {
                    'A+': 4.0, 'A': 4.0, 'A-': 3.7,
                    'B+': 3.3, 'B': 3.0, 'B-': 2.7,
                    'C+': 2.3, 'C': 2.0, 'C-': 1.7,
                    'D+': 1.3, 'D': 1.0, 'D-': 0.7,
                    'F': 0.0
                },
                '100': {
                    // Percentage to 4.0 scale conversion
                    '97-100': 4.0, '93-96': 4.0, '90-92': 3.7,
                    '87-89': 3.3, '83-86': 3.0, '80-82': 2.7,
                    '77-79': 2.3, '73-76': 2.0, '70-72': 1.7,
                    '67-69': 1.3, '65-66': 1.0, '0-64': 0.0
                },
                'uk': {
                    'First': 4.0, '1st': 4.0,
                    'Upper Second': 3.3, '2:1': 3.3,
                    'Lower Second': 2.7, '2:2': 2.7,
                    'Third': 2.0, '3rd': 2.0,
                    'Pass': 1.0, 'Fail': 0.0
                }
            };
            
            // Event Listeners
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    currentTab = this.getAttribute('data-tab');
                    updateTabContent();
                });
            });
            
            systemOptions.forEach(option => {
                option.addEventListener('click', function() {
                    systemOptions.forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                    currentSystem = this.getAttribute('data-system');
                    updateGradingSystem();
                });
            });
            
            addCourseBtn.addEventListener('click', addCourse);
            calculateBtn.addEventListener('click', calculateGPA);
            saveBtn.addEventListener('click', saveSemester);
            resetBtn.addEventListener('click', resetCalculator);
            
            // Functions
            function addCourse() {
                const courseId = Date.now();
                const courseRow = document.createElement('tr');
                courseRow.innerHTML = `
                    <td>
                        <input type="text" class="course-input" data-field="name" placeholder="Course Name" value="Course ${courses.length + 1}">
                    </td>
                    <td>
                        <input type="number" class="course-input" data-field="credits" placeholder="Credits" value="3" min="0" step="0.5">
                    </td>
                    <td>
                        <select class="course-input" data-field="grade">
                            ${getGradeOptions()}
                        </select>
                    </td>
                    <td class="remove-course" data-id="${courseId}">
                        <i class="fas fa-trash"></i>
                    </td>
                `;
                
                coursesTableBody.appendChild(courseRow);
                
                // Add event listener for remove button
                courseRow.querySelector('.remove-course').addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    removeCourse(id);
                });
                
                // Store course data
                courses.push({
                    id: courseId,
                    name: `Course ${courses.length + 1}`,
                    credits: 3,
                    grade: 'A'
                });
            }
            
            function getGradeOptions() {
                let options = '';
                
                if (currentSystem === '4.0') {
                    const grades = ['A+', 'A', 'A-', 'B+', 'B', 'B-', 'C+', 'C', 'C-', 'D+', 'D', 'D-', 'F'];
                    grades.forEach(grade => {
                        options += `<option value="${grade}">${grade}</option>`;
                    });
                } else if (currentSystem === '100') {
                    const ranges = ['97-100', '93-96', '90-92', '87-89', '83-86', '80-82', '77-79', '73-76', '70-72', '67-69', '65-66', '0-64'];
                    ranges.forEach(range => {
                        options += `<option value="${range}">${range}</option>`;
                    });
                } else if (currentSystem === 'uk') {
                    const grades = ['First', 'Upper Second', 'Lower Second', 'Third', 'Pass', 'Fail'];
                    grades.forEach(grade => {
                        options += `<option value="${grade}">${grade}</option>`;
                    });
                } else {
                    // Custom system - simple A-F for now
                    const grades = ['A', 'B', 'C', 'D', 'F'];
                    grades.forEach(grade => {
                        options += `<option value="${grade}">${grade}</option>`;
                    });
                }
                
                return options;
            }
            
            function removeCourse(id) {
                // Remove from DOM
                const row = document.querySelector(`[data-id="${id}"]`).closest('tr');
                row.remove();
                
                // Remove from courses array
                courses = courses.filter(course => course.id != id);
                
                // Update course names if needed
                updateCourseNames();
            }
            
            function updateCourseNames() {
                const courseInputs = document.querySelectorAll('input[data-field="name"]');
                courseInputs.forEach((input, index) => {
                    courses[index].name = input.value;
                });
            }
            
            function updateGradingSystem() {
                // Update all grade selects
                const gradeSelects = document.querySelectorAll('select[data-field="grade"]');
                gradeSelects.forEach(select => {
                    const currentValue = select.value;
                    select.innerHTML = getGradeOptions();
                    
                    // Try to maintain the current value if possible
                    if (Array.from(select.options).some(option => option.value === currentValue)) {
                        select.value = currentValue;
                    }
                });
                
                // Update badge
                let systemName = '';
                switch(currentSystem) {
                    case '4.0': systemName = '4.0 Scale'; break;
                    case '100': systemName = 'Percentage'; break;
                    case 'uk': systemName = 'UK System'; break;
                    case 'custom': systemName = 'Custom Scale'; break;
                }
                
                gpaScaleBadge.innerHTML = `
                    <span style="background: #667eea; color: white; padding: 5px 10px; border-radius: 20px; font-size: 0.9rem;">
                        <i class="fas fa-balance-scale"></i> ${systemName}
                    </span>
                `;
                
                gpaScale.textContent = `On a ${systemName.toLowerCase()}`;
            }
            
            function updateTabContent() {
                // In a real application, this would load different data based on the tab
                // For this demo, we'll just update the UI state
                
                if (currentTab === 'current') {
                    saveBtn.style.display = 'inline-flex';
                } else {
                    saveBtn.style.display = 'none';
                }
            }
            
            function calculateGPA() {
                // Update course data from inputs
                updateCourseData();
                
                if (courses.length === 0) {
                    alert('Please add at least one course');
                    return;
                }
                
                let totalQualityPoints = 0;
                let totalCreditHours = 0;
                const gradeCounts = {};
                
                // Calculate GPA
                courses.forEach(course => {
                    const gradePoints = convertGradeToPoints(course.grade);
                    const qualityPoints = gradePoints * course.credits;
                    
                    totalQualityPoints += qualityPoints;
                    totalCreditHours += course.credits;
                    
                    // Count grades for breakdown
                    if (gradeCounts[course.grade]) {
                        gradeCounts[course.grade]++;
                    } else {
                        gradeCounts[course.grade] = 1;
                    }
                });
                
                const gpa = totalCreditHours > 0 ? totalQualityPoints / totalCreditHours : 0;
                
                // Update results
                gpaValue.textContent = gpa.toFixed(2);
                totalCredits.textContent = totalCreditHours;
                qualityPoints.textContent = totalQualityPoints.toFixed(2);
                coursesCount.textContent = courses.length;
                
                // Determine GPA status
                if (gpa >= 3.7) {
                    gpaStatus.textContent = 'Excellent';
                    gpaStatus.style.color = '#10b981';
                } else if (gpa >= 3.0) {
                    gpaStatus.textContent = 'Good';
                    gpaStatus.style.color = '#3b82f6';
                } else if (gpa >= 2.0) {
                    gpaStatus.textContent = 'Satisfactory';
                    gpaStatus.style.color = '#f59e0b';
                } else {
                    gpaStatus.textContent = 'Needs Improvement';
                    gpaStatus.style.color = '#ef4444';
                }
                
                // Update grade breakdown
                updateGradeBreakdown(gradeCounts);
                
                // Update course summary
                updateCourseSummary();
                
                // Show results
                resultsSection.classList.remove('hidden');
            }
            
            function convertGradeToPoints(grade) {
                if (currentSystem === '4.0') {
                    return gradingScales['4.0'][grade] || 0;
                } else if (currentSystem === '100') {
                    // For percentage ranges, return the midpoint converted to 4.0 scale
                    const range = grade;
                    return gradingScales['100'][range] || 0;
                } else if (currentSystem === 'uk') {
                    return gradingScales['uk'][grade] || 0;
                } else {
                    // Custom system - using 4.0 scale as default
                    return gradingScales['4.0'][grade] || 0;
                }
            }
            
            function updateGradeBreakdown(gradeCounts) {
                gradeBreakdown.innerHTML = '';
                
                // Get all possible grades for current system
                let grades = [];
                if (currentSystem === '4.0') {
                    grades = Object.keys(gradingScales['4.0']);
                } else if (currentSystem === '100') {
                    grades = Object.keys(gradingScales['100']);
                } else if (currentSystem === 'uk') {
                    grades = Object.keys(gradingScales['uk']);
                } else {
                    grades = ['A', 'B', 'C', 'D', 'F'];
                }
                
                // Create breakdown items
                grades.forEach(grade => {
                    const count = gradeCounts[grade] || 0;
                    const item = document.createElement('div');
                    item.className = 'breakdown-item';
                    item.innerHTML = `
                        <div class="breakdown-value">${count}</div>
                        <div class="breakdown-label">${grade}</div>
                    `;
                    gradeBreakdown.appendChild(item);
                });
            }
            
            function updateCourseSummary() {
                courseSummaryBody.innerHTML = '';
                
                courses.forEach(course => {
                    const gradePoints = convertGradeToPoints(course.grade);
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${course.name}</td>
                        <td>${course.credits}</td>
                        <td>${course.grade}</td>
                        <td>${gradePoints.toFixed(1)}</td>
                    `;
                    courseSummaryBody.appendChild(row);
                });
            }
            
            function updateCourseData() {
                const courseRows = document.querySelectorAll('#coursesTableBody tr');
                
                courses = [];
                courseRows.forEach(row => {
                    const id = row.querySelector('.remove-course').getAttribute('data-id');
                    const name = row.querySelector('input[data-field="name"]').value;
                    const credits = parseFloat(row.querySelector('input[data-field="credits"]').value);
                    const grade = row.querySelector('select[data-field="grade"]').value;
                    
                    courses.push({
                        id: id,
                        name: name,
                        credits: credits,
                        grade: grade
                    });
                });
            }
            
            function saveSemester() {
                if (courses.length === 0) {
                    alert('No courses to save');
                    return;
                }
                
                updateCourseData();
                
                const semester = {
                    id: Date.now(),
                    name: `Semester ${savedSemesters.length + 1}`,
                    courses: [...courses],
                    timestamp: new Date().toLocaleDateString()
                };
                
                savedSemesters.push(semester);
                
                // Show confirmation
                const originalText = saveBtn.innerHTML;
                saveBtn.innerHTML = '<i class="fas fa-check"></i> Saved!';
                
                setTimeout(() => {
                    saveBtn.innerHTML = originalText;
                }, 1500);
                
                console.log('Saved semester:', semester);
            }
            
            function resetCalculator() {
                coursesTableBody.innerHTML = '';
                courses = [];
                resultsSection.classList.add('hidden');
                
                // Show confirmation
                const originalText = resetBtn.innerHTML;
                resetBtn.innerHTML = '<i class="fas fa-check"></i> Reset!';
                
                setTimeout(() => {
                    resetBtn.innerHTML = originalText;
                }, 1500);
            }
            
            // Initialize
            addCourse(); // Add one default course
            updateTabContent();
            updateGradingSystem();
        });
    </script>
</body>
</html>
